# YouTube ìë™í™” ì‹œìŠ¤í…œ - ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜

## ğŸ“ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FRONTEND                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     React Dashboard (Vite)                           â”‚    â”‚
â”‚  â”‚  - ì˜ìƒ ê´€ë¦¬ UI    - ì‘ì—… ëª¨ë‹ˆí„°ë§    - í†µê³„ ëŒ€ì‹œë³´ë“œ                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            API GATEWAY (:8000)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  FastAPI - ì¸ì¦, ë¼ìš°íŒ…, Rate Limiting, Request Validation           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼             â–¼               â–¼               â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Video    â”‚  â”‚  Device   â”‚  â”‚   Task    â”‚  â”‚  Human    â”‚  â”‚  Result   â”‚
â”‚  Service  â”‚  â”‚  Service  â”‚  â”‚  Service  â”‚  â”‚  Pattern  â”‚  â”‚  Service  â”‚
â”‚  (:8001)  â”‚  â”‚  (:8002)  â”‚  â”‚  (:8003)  â”‚  â”‚  (:8004)  â”‚  â”‚  (:8005)  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚              â”‚              â”‚              â”‚              â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   Message Queue (Redis) â”‚
                        â”‚   + PostgreSQL Database â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                             â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PC Agent    â”‚           â”‚   PC Agent    â”‚           â”‚   PC Agent    â”‚
â”‚   (Worker)    â”‚           â”‚   (Worker)    â”‚           â”‚   (Worker)    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Device  â”‚  â”‚           â”‚  â”‚ Device  â”‚  â”‚           â”‚  â”‚ Device  â”‚  â”‚
â”‚  â”‚ 1-100   â”‚  â”‚           â”‚  â”‚101-200  â”‚  â”‚           â”‚  â”‚201-300  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                             â”‚                             â”‚
        â–¼                             â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Laixi Script â”‚           â”‚  Laixi Script â”‚           â”‚  Laixi Script â”‚
â”‚  (AutoX.js)   â”‚           â”‚  (AutoX.js)   â”‚           â”‚  (AutoX.js)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
ai-farm/
â”œâ”€â”€ services/                    # ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ api-gateway/             # API Gateway (FastAPI)
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ requirements.txt
â”‚   â”‚
â”‚   â”œâ”€â”€ video-service/           # ì˜ìƒ ê´€ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ crud.py
â”‚   â”‚   â””â”€â”€ requirements.txt
â”‚   â”‚
â”‚   â”œâ”€â”€ device-service/          # ê¸°ê¸° ê´€ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ adb_manager.py
â”‚   â”‚   â””â”€â”€ requirements.txt
â”‚   â”‚
â”‚   â”œâ”€â”€ task-service/            # ì‘ì—… ìŠ¤ì¼€ì¤„ë§ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ scheduler.py
â”‚   â”‚   â”œâ”€â”€ queue_manager.py
â”‚   â”‚   â””â”€â”€ requirements.txt
â”‚   â”‚
â”‚   â”œâ”€â”€ human-pattern-service/   # íœ´ë¨¼ íŒ¨í„´ ìƒì„± ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ patterns/
â”‚   â”‚   â”‚   â”œâ”€â”€ watch_pattern.py
â”‚   â”‚   â”‚   â”œâ”€â”€ touch_pattern.py
â”‚   â”‚   â”‚   â”œâ”€â”€ scroll_pattern.py
â”‚   â”‚   â”‚   â””â”€â”€ interaction_pattern.py
â”‚   â”‚   â””â”€â”€ requirements.txt
â”‚   â”‚
â”‚   â””â”€â”€ result-service/          # ê²°ê³¼ ìˆ˜ì§‘ ì„œë¹„ìŠ¤
â”‚       â”œâ”€â”€ main.py
â”‚       â”œâ”€â”€ aggregator.py
â”‚       â”œâ”€â”€ screenshot_handler.py
â”‚       â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ shared/                      # ê³µìœ  ëª¨ë“ˆ
â”‚   â”œâ”€â”€ schemas/                 # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”œâ”€â”€ video.py
â”‚   â”‚   â”œâ”€â”€ device.py
â”‚   â”‚   â”œâ”€â”€ task.py
â”‚   â”‚   â”œâ”€â”€ result.py
â”‚   â”‚   â””â”€â”€ pattern.py
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ connection.py
â”‚   â”‚   â””â”€â”€ migrations/
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ logger.py
â”‚       â””â”€â”€ config.py
â”‚
â”œâ”€â”€ workers/                     # PCë³„ ì›Œì»¤ ì—ì´ì „íŠ¸
â”‚   â”œâ”€â”€ pc_agent.py
â”‚   â”œâ”€â”€ device_controller.py
â”‚   â””â”€â”€ laixi_bridge.py
â”‚
â”œâ”€â”€ scripts/                     # Laixi (AutoX.js) ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ youtube_automation.js
â”‚   â”œâ”€â”€ human_patterns.js
â”‚   â””â”€â”€ utils.js
â”‚
â”œâ”€â”€ frontend/                    # React ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

---

## ğŸ”Œ ì„œë¹„ìŠ¤ë³„ ì±…ì„

| ì„œë¹„ìŠ¤ | í¬íŠ¸ | ì±…ì„ |
|--------|------|------|
| API Gateway | 8000 | ì¸ì¦, ë¼ìš°íŒ…, Rate Limiting |
| Video Service | 8001 | ì˜ìƒ CRUD, ìƒíƒœ ê´€ë¦¬ |
| Device Service | 8002 | ê¸°ê¸° ë“±ë¡/ìƒíƒœ/í—¬ìŠ¤ì²´í¬ |
| Task Service | 8003 | ì‘ì—… ìƒì„±/ë¶„ë°°/ìŠ¤ì¼€ì¤„ë§ |
| Human Pattern Service | 8004 | íœ´ë¨¼ íŒ¨í„´ ìƒì„± |
| Result Service | 8005 | ê²°ê³¼ ìˆ˜ì§‘/ì§‘ê³„/ë¦¬í¬íŠ¸ |

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### videos
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| url | VARCHAR(500) | YouTube URL |
| title | VARCHAR(500) | ì˜ìƒ ì œëª© |
| keyword | VARCHAR(255) | ê²€ìƒ‰ í‚¤ì›Œë“œ |
| duration | INTEGER | ì˜ìƒ ê¸¸ì´ (ì´ˆ) |
| status | ENUM | pending/processing/completed/error |
| priority | INTEGER | ìš°ì„ ìˆœìœ„ (1-10) |
| created_at | TIMESTAMP | |
| updated_at | TIMESTAMP | |

### devices
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| serial_number | VARCHAR(100) | ADB ì‹œë¦¬ì–¼ |
| pc_id | VARCHAR(50) | ì—°ê²°ëœ PC ID |
| status | ENUM | idle/busy/offline/error |
| last_heartbeat | TIMESTAMP | ë§ˆì§€ë§‰ í—¬ìŠ¤ì²´í¬ |
| battery_temp | FLOAT | ë°°í„°ë¦¬ ì˜¨ë„ |
| cpu_usage | FLOAT | CPU ì‚¬ìš©ë¥  |
| total_tasks | INTEGER | ì´ ì²˜ë¦¬ ì‘ì—… ìˆ˜ |

### tasks
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| video_id | UUID | FK â†’ videos |
| device_id | UUID | FK â†’ devices |
| status | ENUM | queued/running/completed/failed |
| pattern_config | JSONB | ì ìš©ëœ íœ´ë¨¼ íŒ¨í„´ ì„¤ì • |
| started_at | TIMESTAMP | |
| completed_at | TIMESTAMP | |
| retry_count | INTEGER | ì¬ì‹œë„ íšŸìˆ˜ |

### results
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| task_id | UUID | FK â†’ tasks |
| watch_time | INTEGER | ì‹œì²­ ì‹œê°„ (ì´ˆ) |
| liked | BOOLEAN | ì¢‹ì•„ìš” ì—¬ë¶€ |
| commented | BOOLEAN | ëŒ“ê¸€ ì—¬ë¶€ |
| comment_text | TEXT | ëŒ“ê¸€ ë‚´ìš© |
| search_type | INTEGER | ê²€ìƒ‰ ê²½ë¡œ (1-4) |
| search_rank | INTEGER | ê²€ìƒ‰ ìˆœìœ„ |
| screenshot_url | VARCHAR(500) | ìŠ¤í¬ë¦°ìƒ· URL |
| error_message | TEXT | ì—ëŸ¬ ë©”ì‹œì§€ |
| created_at | TIMESTAMP | |

### pattern_logs
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | UUID | PK |
| task_id | UUID | FK â†’ tasks |
| pattern_type | VARCHAR(50) | watch/touch/scroll/interaction |
| pattern_data | JSONB | ìƒì„±ëœ íŒ¨í„´ ìƒì„¸ |
| created_at | TIMESTAMP | |

---

## ğŸ”„ í†µì‹  í”„ë¡œí† ì½œ

### ì„œë¹„ìŠ¤ ê°„ í†µì‹ : REST + Redis Pub/Sub

```
[Task Service] --REST--> [Human Pattern Service]
       â”‚
       â””â”€â”€Redis Pub/Subâ”€â”€> [PC Workers]
                                 â”‚
                                 â””â”€â”€RESTâ”€â”€> [Result Service]
```

### Redis ì±„ë„ êµ¬ì¡°

```
channels:
  - tasks:new          # ìƒˆ ì‘ì—… ë°œí–‰
  - tasks:completed    # ì‘ì—… ì™„ë£Œ ì•Œë¦¼
  - devices:status     # ê¸°ê¸° ìƒíƒœ ë³€ê²½
  - patterns:request   # íŒ¨í„´ ìƒì„± ìš”ì²­
```

---

## ğŸš€ ë°°í¬ ì „ëµ

### Docker Compose (ê°œë°œ/ì†Œê·œëª¨)
```yaml
services:
  api-gateway:
    build: ./services/api-gateway
    ports: ["8000:8000"]
  
  video-service:
    build: ./services/video-service
    ports: ["8001:8001"]
  
  # ... ë‚˜ë¨¸ì§€ ì„œë¹„ìŠ¤
  
  postgres:
    image: postgres:15
    volumes: ["pg_data:/var/lib/postgresql/data"]
  
  redis:
    image: redis:7
```

### Kubernetes (ëŒ€ê·œëª¨)
- ê° ì„œë¹„ìŠ¤ë³„ Deployment + Service
- HPA (Horizontal Pod Autoscaler)
- Ingress Controllerë¡œ ë¼ìš°íŒ…

